{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport redirect from '../helpers/redirect';\nimport { getFirebaseCookie } from '../helpers/session';\n/**\n * HOC for all the secret route\n */\n\nexport default (function (ComposedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(SecretPage, _Component);\n\n      function SecretPage() {\n        _classCallCheck(this, SecretPage);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(SecretPage).apply(this, arguments));\n      }\n\n      _createClass(SecretPage, [{\n        key: \"render\",\n        value: function render() {\n          return __jsx(ComposedComponent, this.props);\n        }\n      }], [{\n        key: \"getInitialProps\",\n        value: function () {\n          var _getInitialProps = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(context) {\n            var token, user, isLoggedIn;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    token = getFirebaseCookie('id_token', context);\n                    user = false;\n                    user = getFirebaseCookie('user', context);\n                    isLoggedIn = token ? true : false;\n\n                    if (!isLoggedIn) {\n                      redirect(context, '/signin');\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      isLoggedIn: isLoggedIn,\n                      userId: user ? user.userId : 'false',\n                      email: user ? user.email : false,\n                      error: user ? user.error : false\n                    });\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          function getInitialProps(_x) {\n            return _getInitialProps.apply(this, arguments);\n          }\n\n          return getInitialProps;\n        }()\n      }]);\n\n      return SecretPage;\n    }(Component)\n  );\n});","map":null,"metadata":{},"sourceType":"module"}