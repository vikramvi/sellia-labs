{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/bhavikshah/Work/Sellia/sellia-mono/selliafemono/packages/web/containers/Layout/index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport styled from \"styled-components\";\nimport { naviconRound } from \"react-icons-kit/ionicons/naviconRound\";\nimport { plusRound } from \"react-icons-kit/ionicons/plusRound\";\nimport { more } from \"react-icons-kit/ionicons/more\";\nimport { FullPageSpinner } from \"../../components/Loader/spinnerLoader\";\nimport { LOGOUT } from \"core/graphql/Mutations\";\nimport { GET_AUTHOR_INFO } from \"core/graphql/Profile.query\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport AuthHelper from \"../../helpers/authHelper\";\nimport { removeFirebaseCookie } from \"../../helpers/session\";\nimport redirect from \"../../helpers/redirect\";\nimport { androidClose } from \"react-icons-kit/ionicons/androidClose\";\nimport Icon from \"react-icons-kit\";\nimport Button from \"reusecore/src/elements/Button\";\nimport Navbar from \"../../components/Navbar\";\nimport Footer from \"../../components/Footer\";\nimport SideDrawer from \"reusecore/src/elements/Drawer\";\nimport { setFirebaseCookie } from \"../../helpers/session\";\nimport { HOME_PAGE, SEARCH_PAGE, NEAREST_POST_PAGE, RECENT_POST_PAGE, CATEGORIES_PAGE, SINGLE_CATEGORY_PAGE, SINGLE_POST_PAGE, FAVOURITE_PAGE, PROFILE_PAGE, SIGNIN_PAGE, SIGNUP_PAGE, FORGET_PASSWORD_PAGE, RESET_PASSWORD_PAGE, ADD_POST, ACCOUNT_SETTING_PAGE, CHAT_PAGE } from \"core/navigation/constant\";\nvar Main = styled.main.withConfig({\n  displayName: \"Layout__Main\",\n  componentId: \"sc-1ece30d-0\"\n})([\"min-height:100vh;min-height:calc(100vh - 153px);\"]);\n_c = Main;\nvar DrawerWrapper = styled(\"div\").withConfig({\n  displayName: \"Layout__DrawerWrapper\",\n  componentId: \"sc-1ece30d-1\"\n})([\"display:inline-flex;flex-direction:column;height:100%;width:100%;padding:70px 20px 50px;\"]);\n_c2 = DrawerWrapper;\nvar DrawerLink = styled(\"span\").withConfig({\n  displayName: \"Layout__DrawerLink\",\n  componentId: \"sc-1ece30d-2\"\n})([\"display:inline-flex;padding:11px 0;a{color:#333;}\"]);\n_c3 = DrawerLink;\nexport default _s(function (_ref) {\n  _s();\n\n  var children = _ref.children,\n      _ref$userId = _ref.userId,\n      userId = _ref$userId === void 0 ? \"\" : _ref$userId,\n      history = _ref.history,\n      isLoggedIn = _ref.isLoggedIn,\n      location = _ref.location,\n      logout = _ref.logout,\n      pathname = _ref.pathname;\n\n  var _useState = useState(false),\n      drawerState = _useState[0],\n      toggleDrawer = _useState[1];\n\n  var _useState2 = useState(false),\n      loggingOut = _useState2[0],\n      setloggingOut = _useState2[1];\n\n  var userAvatar = \"\";\n  var userFallbackAvatar = \"\";\n\n  var _useQuery = useQuery(GET_AUTHOR_INFO, {\n    variables: {\n      USERNAME: userId\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  userAvatar = data && data.author && data.author.image && data.author.image.url ? data.author.image.url : \"\";\n  userFallbackAvatar = data && data.author && data.author.image && data.author.image.largeUrl ? data.author.image.largeUrl : \"\";\n  useEffect(function () {\n    if (true && localStorage.getItem(\"currentLocation\") === null) {\n      getLocation();\n    }\n  }, []);\n\n  var getLocation = function getLocation() {\n    navigator.geolocation.getCurrentPosition(storePosition);\n  };\n\n  var storePosition = function storePosition(position) {\n    setFirebaseCookie(\"currentLocation\", {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude\n    });\n  };\n\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var isLoggedOut;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setloggingOut(true);\n              _context.next = 3;\n              return AuthHelper.logout();\n\n            case 3:\n              isLoggedOut = _context.sent;\n              setloggingOut(false);\n\n              if (isLoggedOut === true) {\n                removeFirebaseCookie(\"id_token\");\n                removeFirebaseCookie(\"user\");\n                redirect({}, \"/\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLogout() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleToggle = function handleToggle() {\n    return toggleDrawer(!drawerState);\n  };\n\n  var DRAWER_MENU = [{\n    path: HOME_PAGE,\n    name: \"Home\"\n  }, {\n    path: \"\".concat(ADD_POST, \"/new\"),\n    name: \"Add Post\"\n  }, {\n    path: SEARCH_PAGE,\n    name: \"Search Page\"\n  }, {\n    path: NEAREST_POST_PAGE,\n    name: \"Nearest Post Page\"\n  }, {\n    path: RECENT_POST_PAGE,\n    name: \"Recent Post Page\"\n  }, {\n    path: CATEGORIES_PAGE,\n    name: \"Category Page\"\n  }];\n  return __jsx(React.Fragment, null, loggingOut && __jsx(FullPageSpinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 22\n    }\n  }), __jsx(Navbar, {\n    onToggle: handleToggle,\n    userId: userId,\n    history: history,\n    isLoggedIn: isLoggedIn,\n    location: location,\n    logout: handleLogout,\n    buttonIcon: __jsx(Icon, {\n      icon: naviconRound,\n      size: 21,\n      color: \"#ffffff\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }),\n    menuButtonIcon: __jsx(Icon, {\n      icon: plusRound,\n      size: 20,\n      color: \"#595959\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }),\n    dropdownMenuIcon: __jsx(Icon, {\n      icon: more,\n      size: 40,\n      color: \"#595959\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 27\n      }\n    }),\n    pathname: pathname,\n    avatar: [userAvatar, userFallbackAvatar],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }), drawerState && __jsx(SideDrawer, {\n    open: drawerState,\n    onClose: handleToggle,\n    toggleHandler: handleToggle,\n    isLoggedIn: isLoggedIn,\n    userId: userId,\n    logout: logout,\n    closeButton: __jsx(Icon, {\n      icon: androidClose,\n      size: 21,\n      color: \"#333333\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 24\n      }\n    }),\n    closeButtonStyle: {\n      display: \"inline-flex\",\n      position: \"absolute\",\n      top: 20,\n      right: 20,\n      cursor: \"pointer\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, __jsx(DrawerWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, DRAWER_MENU.map(function (item, index) {\n    return __jsx(DrawerLink, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, __jsx(Link, {\n      href: item.path,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, item.name)));\n  }), isLoggedIn ? __jsx(React.Fragment, null, __jsx(DrawerLink, {\n    key: PROFILE_PAGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"\".concat(PROFILE_PAGE, \"/[username]\"),\n    as: \"\".concat(PROFILE_PAGE, \"/\").concat(userId),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, \"Profile changes\"))), __jsx(DrawerLink, {\n    key: CHAT_PAGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"\".concat(CHAT_PAGE, \"/[username]\"),\n    as: \"\".concat(CHAT_PAGE, \"/\").concat(userId),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, \"Inbox\"))), __jsx(DrawerLink, {\n    key: ACCOUNT_SETTING_PAGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"\".concat(ACCOUNT_SETTING_PAGE, \"?view=edit-profile\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }, \"Account Setting\"))), __jsx(Button, {\n    onClick: handleLogout,\n    title: \"Logout\",\n    variant: \"textButton\",\n    width: 1,\n    color: \"#EF5A5A\",\n    style: {\n      minHeight: \"auto\",\n      minWidth: \"auto\",\n      textDecoration: \"none\",\n      justifyContent: \"flex-start\",\n      marginTop: 8,\n      marginLeft: \"-4px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  })) : __jsx(Link, {\n    href: SIGNIN_PAGE,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    title: \"Login\",\n    variant: \"textButton\",\n    width: 1,\n    color: \"#30C56D\",\n    style: {\n      minHeight: \"auto\",\n      minWidth: \"auto\",\n      textDecoration: \"none\",\n      justifyContent: \"flex-start\",\n      marginTop: 8,\n      marginLeft: \"-4px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  })))), __jsx(Main, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }, children), __jsx(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }\n  }));\n}, \"amqTzBEsXOkS1IyI2DdPaVSwyA0=\", false, function () {\n  return [useQuery];\n});\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Main\");\n$RefreshReg$(_c2, \"DrawerWrapper\");\n$RefreshReg$(_c3, \"DrawerLink\");","map":{"version":3,"sources":["/Users/bhavikshah/Work/Sellia/sellia-mono/selliafemono/packages/web/containers/Layout/index.js"],"names":["React","useState","useEffect","Link","styled","naviconRound","plusRound","more","FullPageSpinner","LOGOUT","GET_AUTHOR_INFO","useMutation","useQuery","AuthHelper","removeFirebaseCookie","redirect","androidClose","Icon","Button","Navbar","Footer","SideDrawer","setFirebaseCookie","HOME_PAGE","SEARCH_PAGE","NEAREST_POST_PAGE","RECENT_POST_PAGE","CATEGORIES_PAGE","SINGLE_CATEGORY_PAGE","SINGLE_POST_PAGE","FAVOURITE_PAGE","PROFILE_PAGE","SIGNIN_PAGE","SIGNUP_PAGE","FORGET_PASSWORD_PAGE","RESET_PASSWORD_PAGE","ADD_POST","ACCOUNT_SETTING_PAGE","CHAT_PAGE","Main","main","DrawerWrapper","DrawerLink","children","userId","history","isLoggedIn","location","logout","pathname","drawerState","toggleDrawer","loggingOut","setloggingOut","userAvatar","userFallbackAvatar","variables","USERNAME","data","error","loading","author","image","url","largeUrl","localStorage","getItem","getLocation","navigator","geolocation","getCurrentPosition","storePosition","position","lat","coords","latitude","lng","longitude","handleLogout","isLoggedOut","handleToggle","DRAWER_MENU","path","name","display","top","right","cursor","map","item","index","minHeight","minWidth","textDecoration","justifyContent","marginTop","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport styled from \"styled-components\";\nimport { naviconRound } from \"react-icons-kit/ionicons/naviconRound\";\nimport { plusRound } from \"react-icons-kit/ionicons/plusRound\";\nimport { more } from \"react-icons-kit/ionicons/more\";\nimport { FullPageSpinner } from \"../../components/Loader/spinnerLoader\";\nimport { LOGOUT } from \"core/graphql/Mutations\";\nimport { GET_AUTHOR_INFO } from \"core/graphql/Profile.query\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport AuthHelper from \"../../helpers/authHelper\";\nimport { removeFirebaseCookie } from \"../../helpers/session\";\nimport redirect from \"../../helpers/redirect\";\nimport { androidClose } from \"react-icons-kit/ionicons/androidClose\";\nimport Icon from \"react-icons-kit\";\nimport Button from \"reusecore/src/elements/Button\";\nimport Navbar from \"../../components/Navbar\";\nimport Footer from \"../../components/Footer\";\nimport SideDrawer from \"reusecore/src/elements/Drawer\";\nimport { setFirebaseCookie } from \"../../helpers/session\";\nimport {\n  HOME_PAGE,\n  SEARCH_PAGE,\n  NEAREST_POST_PAGE,\n  RECENT_POST_PAGE,\n  CATEGORIES_PAGE,\n  SINGLE_CATEGORY_PAGE,\n  SINGLE_POST_PAGE,\n  FAVOURITE_PAGE,\n  PROFILE_PAGE,\n  SIGNIN_PAGE,\n  SIGNUP_PAGE,\n  FORGET_PASSWORD_PAGE,\n  RESET_PASSWORD_PAGE,\n  ADD_POST,\n  ACCOUNT_SETTING_PAGE,\n  CHAT_PAGE,\n} from \"core/navigation/constant\";\n\nconst Main = styled.main`\n  min-height: 100vh;\n  min-height: calc(100vh - 153px);\n`;\n\nconst DrawerWrapper = styled(\"div\")`\n  display: inline-flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  padding: 70px 20px 50px;\n`;\n\nconst DrawerLink = styled(\"span\")`\n  display: inline-flex;\n  padding: 11px 0;\n\n  a {\n    color: #333;\n  }\n`;\n\nexport default ({\n  children,\n  userId = \"\",\n  history,\n  isLoggedIn,\n  location,\n  logout,\n  pathname,\n}) => {\n  const [drawerState, toggleDrawer] = useState(false);\n  const [loggingOut, setloggingOut] = useState(false);\n  let userAvatar = \"\";\n  let userFallbackAvatar = \"\";\n  const { data, error, loading } = useQuery(GET_AUTHOR_INFO, {\n    variables: { USERNAME: userId },\n  });\n  userAvatar =\n    data && data.author && data.author.image && data.author.image.url\n      ? data.author.image.url\n      : \"\";\n  userFallbackAvatar =\n    data && data.author && data.author.image && data.author.image.largeUrl\n      ? data.author.image.largeUrl\n      : \"\";\n\n  useEffect(() => {\n    if (process.browser && localStorage.getItem(\"currentLocation\") === null) {\n      getLocation();\n    }\n  }, []);\n\n  const getLocation = () => {\n    navigator.geolocation.getCurrentPosition(storePosition);\n  };\n  const storePosition = (position) => {\n    setFirebaseCookie(\"currentLocation\", {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    });\n  };\n\n  const handleLogout = async () => {\n    setloggingOut(true);\n\n    const isLoggedOut = await AuthHelper.logout();\n\n    setloggingOut(false);\n\n    if (isLoggedOut === true) {\n      removeFirebaseCookie(\"id_token\");\n      removeFirebaseCookie(\"user\");\n      redirect({}, \"/\");\n    }\n  };\n\n  const handleToggle = () => toggleDrawer(!drawerState);\n\n  const DRAWER_MENU = [\n    {\n      path: HOME_PAGE,\n      name: \"Home\",\n    },\n    {\n      path: `${ADD_POST}/new`,\n      name: \"Add Post\",\n    },\n    {\n      path: SEARCH_PAGE,\n      name: \"Search Page\",\n    },\n    {\n      path: NEAREST_POST_PAGE,\n      name: \"Nearest Post Page\",\n    },\n    {\n      path: RECENT_POST_PAGE,\n      name: \"Recent Post Page\",\n    },\n    {\n      path: CATEGORIES_PAGE,\n      name: \"Category Page\",\n    },\n  ];\n\n  return (\n    <>\n      {loggingOut && <FullPageSpinner />}\n      <Navbar\n        onToggle={handleToggle}\n        userId={userId}\n        history={history}\n        isLoggedIn={isLoggedIn}\n        location={location}\n        logout={handleLogout}\n        buttonIcon={<Icon icon={naviconRound} size={21} color=\"#ffffff\" />}\n        menuButtonIcon={<Icon icon={plusRound} size={20} color=\"#595959\" />}\n        dropdownMenuIcon={<Icon icon={more} size={40} color=\"#595959\" />}\n        pathname={pathname}\n        avatar={[userAvatar, userFallbackAvatar]}\n      />\n      {drawerState && (\n        <SideDrawer\n          open={drawerState}\n          onClose={handleToggle}\n          toggleHandler={handleToggle}\n          isLoggedIn={isLoggedIn}\n          userId={userId}\n          logout={logout}\n          closeButton={<Icon icon={androidClose} size={21} color=\"#333333\" />}\n          closeButtonStyle={{\n            display: \"inline-flex\",\n            position: \"absolute\",\n            top: 20,\n            right: 20,\n            cursor: \"pointer\",\n          }}\n        >\n          <DrawerWrapper>\n            {DRAWER_MENU.map((item, index) => (\n              <DrawerLink key={index}>\n                <Link href={item.path}>\n                  <a>{item.name}</a>\n                </Link>\n              </DrawerLink>\n            ))}\n\n            {isLoggedIn ? (\n              <>\n                <DrawerLink key={PROFILE_PAGE}>\n                  <Link\n                    href={`${PROFILE_PAGE}/[username]`}\n                    as={`${PROFILE_PAGE}/${userId}`}\n                  >\n                    <a>Profile changes</a>\n                  </Link>\n                </DrawerLink>\n\n                <DrawerLink key={CHAT_PAGE}>\n                  <Link\n                    href={`${CHAT_PAGE}/[username]`}\n                    as={`${CHAT_PAGE}/${userId}`}\n                  >\n                    <a>Inbox</a>\n                  </Link>\n                </DrawerLink>\n\n                <DrawerLink key={ACCOUNT_SETTING_PAGE}>\n                  <Link href={`${ACCOUNT_SETTING_PAGE}?view=edit-profile`}>\n                    <a>Account Setting</a>\n                  </Link>\n                </DrawerLink>\n                <Button\n                  onClick={handleLogout}\n                  title=\"Logout\"\n                  variant=\"textButton\"\n                  width={1}\n                  color=\"#EF5A5A\"\n                  style={{\n                    minHeight: \"auto\",\n                    minWidth: \"auto\",\n                    textDecoration: \"none\",\n                    justifyContent: \"flex-start\",\n                    marginTop: 8,\n                    marginLeft: \"-4px\",\n                  }}\n                />\n              </>\n            ) : (\n              <Link href={SIGNIN_PAGE}>\n                <Button\n                  title=\"Login\"\n                  variant=\"textButton\"\n                  width={1}\n                  color=\"#30C56D\"\n                  style={{\n                    minHeight: \"auto\",\n                    minWidth: \"auto\",\n                    textDecoration: \"none\",\n                    justifyContent: \"flex-start\",\n                    marginTop: 8,\n                    marginLeft: \"-4px\",\n                  }}\n                />\n              </Link>\n            )}\n          </DrawerWrapper>\n        </SideDrawer>\n      )}\n      <Main>{children}</Main>\n      <Footer />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}