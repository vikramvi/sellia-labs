{"ast":null,"code":"var _jsxFileName = \"/Users/bhavikshah/Work/headless-graphql/packages/web/containers/Profile/userDraft.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport { PostLoader } from '../../components/Placeholder';\nimport { Grid } from 'react-styled-flexboxgrid';\nimport { SINGLE_POST_PAGE } from 'core/navigation/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_DRAFT_POST } from 'core/graphql/Profile.query';\nimport { CURRENCY } from '../../Config';\nimport PostCard from '../../components/PostCard';\nimport ListGrid from 'reusecore/src/elements/ListGrid';\nimport NoItemFound from '../../components/NoItemFound';\nimport OnError from '../../components/OnError';\nexport default withRouter(function UserListingPost(_ref) {\n  var username = _ref.router.query.username;\n\n  var _useState = useState(false),\n      loadingMore = _useState[0],\n      toggleLoading = _useState[1];\n\n  var _useState2 = useState(1),\n      page = _useState2[0],\n      paginate = _useState2[1];\n\n  var QUERY_VARIABLES;\n  QUERY_VARIABLES = {\n    USERNAME: username,\n    LIMIT: 12\n  };\n\n  var _useQuery = useQuery(GET_DRAFT_POST, {\n    variables: QUERY_VARIABLES\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      fetchMore = _useQuery.fetchMore;\n\n  var userDraftPosts = data && data.author && data.author.draft && data.author.draft.data ? data.author.draft.data : [];\n  var totalPost = data && data.author && data.author.draft ? data.author.draft.total : 0;\n  var postCount = userDraftPosts.length;\n  if (error) return __jsx(OnError, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  });\n  return __jsx(Grid, {\n    style: {\n      paddingLeft: 15,\n      paddingRight: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, !loading && userDraftPosts.length === 0 ? __jsx(NoItemFound, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }) : __jsx(ListGrid, {\n    data: userDraftPosts,\n    totalPost: totalPost,\n    postCount: postCount,\n    columnWidth: ['100%', '50%', '33.33%', '25%'],\n    component: function component(item) {\n      var postImg = item.image ? item.image.url : '';\n      var postFallbackImage = item.image ? item.image.largeUrl : '';\n      return __jsx(Link, {\n        href: \"\".concat(SINGLE_POST_PAGE, \"/\").concat(item.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, __jsx(PostCard, {\n        currency: CURRENCY,\n        title: item.title,\n        price: item.price,\n        imageSrc: [postImg, postFallbackImage],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      })));\n    },\n    loading: loading ? loading : loadingMore,\n    placeholder: __jsx(PostLoader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }),\n    limit: QUERY_VARIABLES.LIMIT,\n    handleLoadMore: function handleLoadMore(loading) {\n      toggleLoading(true);\n      paginate(page + 1);\n      fetchMore({\n        variables: {\n          page: page + 1\n        },\n        updateQuery: function updateQuery(prev, _ref2) {\n          var fetchMoreResult = _ref2.fetchMoreResult;\n\n          if (!fetchMoreResult) {\n            toggleLoading(false);\n            return prev;\n          }\n\n          var oldPosts = prev.author.draft.data;\n          var newPosts = fetchMoreResult.author.draft.data;\n\n          if (postCount && totalPost) {\n            if (postCount <= totalPost) {\n              toggleLoading(false);\n              var concatedPosts = oldPosts.concat(newPosts);\n              fetchMoreResult.author.draft.data = concatedPosts;\n              return fetchMoreResult;\n            }\n          }\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }));\n});","map":{"version":3,"sources":["/Users/bhavikshah/Work/headless-graphql/packages/web/containers/Profile/userDraft.js"],"names":["React","useState","Link","withRouter","PostLoader","Grid","SINGLE_POST_PAGE","useQuery","GET_DRAFT_POST","CURRENCY","PostCard","ListGrid","NoItemFound","OnError","UserListingPost","username","router","query","loadingMore","toggleLoading","page","paginate","QUERY_VARIABLES","USERNAME","LIMIT","variables","data","loading","error","fetchMore","userDraftPosts","author","draft","totalPost","total","postCount","length","paddingLeft","paddingRight","item","postImg","image","url","postFallbackImage","largeUrl","slug","title","price","updateQuery","prev","fetchMoreResult","oldPosts","newPosts","concatedPosts","concat"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport { PostLoader } from '../../components/Placeholder';\nimport { Grid } from 'react-styled-flexboxgrid';\nimport { SINGLE_POST_PAGE } from 'core/navigation/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_DRAFT_POST } from 'core/graphql/Profile.query';\nimport { CURRENCY } from '../../Config';\nimport PostCard from '../../components/PostCard';\nimport ListGrid from 'reusecore/src/elements/ListGrid';\nimport NoItemFound from '../../components/NoItemFound';\nimport OnError from '../../components/OnError';\n\nexport default withRouter(function UserListingPost({\n  router: {\n    query: { username },\n  },\n}) {\n  const [loadingMore, toggleLoading] = useState(false);\n  const [page, paginate] = useState(1);\n\n  let QUERY_VARIABLES;\n  QUERY_VARIABLES = {\n    USERNAME: username,\n    LIMIT: 12,\n  };\n  const { data, loading, error, fetchMore } = useQuery(GET_DRAFT_POST, {\n    variables: QUERY_VARIABLES,\n  });\n\n  const userDraftPosts =\n    data && data.author && data.author.draft && data.author.draft.data\n      ? data.author.draft.data\n      : [];\n\n  const totalPost =\n    data && data.author && data.author.draft ? data.author.draft.total : 0;\n  const postCount = userDraftPosts.length;\n  if (error) return <OnError />;\n\n  return (\n    <Grid style={{ paddingLeft: 15, paddingRight: 15 }}>\n      {!loading && userDraftPosts.length === 0 ? (\n        <NoItemFound />\n      ) : (\n        <ListGrid\n          data={userDraftPosts}\n          totalPost={totalPost}\n          postCount={postCount}\n          columnWidth={['100%', '50%', '33.33%', '25%']}\n          component={item => {\n            const postImg = item.image ? item.image.url : '';\n            const postFallbackImage = item.image ? item.image.largeUrl : '';\n            return (\n              <Link href={`${SINGLE_POST_PAGE}/${item.slug}`}>\n                <a>\n                  <PostCard\n                    currency={CURRENCY}\n                    title={item.title}\n                    price={item.price}\n                    imageSrc={[postImg, postFallbackImage]}\n                  />\n                </a>\n              </Link>\n            );\n          }}\n          loading={loading ? loading : loadingMore}\n          placeholder={<PostLoader />}\n          limit={QUERY_VARIABLES.LIMIT}\n          handleLoadMore={loading => {\n            toggleLoading(true);\n            paginate(page + 1);\n            fetchMore({\n              variables: {\n                page: page + 1,\n              },\n              updateQuery: (prev, { fetchMoreResult }) => {\n                if (!fetchMoreResult) {\n                  toggleLoading(false);\n                  return prev;\n                }\n                const oldPosts = prev.author.draft.data;\n                const newPosts = fetchMoreResult.author.draft.data;\n                if (postCount && totalPost) {\n                  if (postCount <= totalPost) {\n                    toggleLoading(false);\n                    const concatedPosts = oldPosts.concat(newPosts);\n                    fetchMoreResult.author.draft.data = concatedPosts;\n                    return fetchMoreResult;\n                  }\n                }\n              },\n            });\n          }}\n        />\n      )}\n    </Grid>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}