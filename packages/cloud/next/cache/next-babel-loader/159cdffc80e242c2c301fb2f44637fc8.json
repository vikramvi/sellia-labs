{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, Fragment } from 'react';\nimport Dropzone from 'react-dropzone';\nimport styled from 'styled-components';\nimport { Col } from 'react-styled-flexboxgrid';\nimport Icon from 'react-icons-kit';\nimport { checkmarkCircled, closeCircled, androidClose } from 'react-icons-kit/ionicons';\nimport UpIcon from 'core/static/images/UploadIcon.png';\nimport { AddPostContext } from '../../../contexts/AddPostContext';\nimport Box from 'reusecore/src/elements/Box';\nimport Image from 'reusecore/src/elements/Image';\nvar UpButton = styled('button').withConfig({\n  displayName: \"AddImage__UpButton\",\n  componentId: \"sc-18abi1y-0\"\n})([\"width:75px;height:75px;display:flex;align-items:center;justify-content:center;background-color:transparent;border:2px dashed #dfdfdf;border-radius:3px;outline:0;margin-bottom:15px;cursor:pointer;\"]);\nvar DeleteBtn = styled('button').withConfig({\n  displayName: \"AddImage__DeleteBtn\",\n  componentId: \"sc-18abi1y-1\"\n})([\"width:18px;height:18px;display:flex;align-items:center;justify-content:center;background-color:#dfdfdf;font-size:12px;border:0;border-radius:50%;outline:0;position:absolute;top:-9px;left:-9px;\"]);\nvar ThumbWrapper = styled('div').withConfig({\n  displayName: \"AddImage__ThumbWrapper\",\n  componentId: \"sc-18abi1y-2\"\n})([\"height:295px;overflow:hidden;overflow-y:auto;padding:10px;margin-left:-10px;-ms-overflow-style:none;overflow:-moz-scrollbars-none;&::-webkit-scrollbar{display:none;}\"]);\nexport default (function () {\n  var _useContext = useContext(AddPostContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var adPost = state.adPost;\n\n  var onPreviewDrop = function onPreviewDrop(selectedImages) {\n    selectedImages.map(function (image) {\n      image.preview = URL.createObjectURL(image);\n    });\n    dispatch({\n      type: 'UPDATE_ADPOST',\n      payload: {\n        key: 'localGallery',\n        value: adPost.localGallery.concat(selectedImages)\n      }\n    });\n  };\n\n  var handleRemoveImage = function handleRemoveImage(item) {\n    var gallery = adPost.gallery;\n    var localGallery = adPost.localGallery;\n    var index = gallery.findIndex(function (image) {\n      return item.url === image.url;\n    });\n\n    if (index !== -1) {\n      gallery.splice(index, 1);\n    }\n\n    var localImageIndex = localGallery.findIndex(function (image) {\n      return item.preview === image.preview;\n    });\n\n    if (localImageIndex !== -1) {\n      localGallery.splice(localImageIndex, 1);\n    }\n\n    if (item.url) {\n      if (item.url === adPost.preImage.url) {\n        dispatch({\n          type: 'UPDATE_ADPOST',\n          payload: {\n            key: 'image',\n            value: gallery[0]\n          }\n        });\n      }\n\n      dispatch({\n        type: 'UPDATE_ADPOST',\n        payload: {\n          key: 'gallery',\n          value: gallery\n        }\n      });\n    }\n\n    if (item.preview) {\n      if (item.preview === adPost.localImage.preview) {\n        dispatch({\n          type: 'UPDATE_ADPOST',\n          payload: {\n            key: 'localImage',\n            value: localGallery[0]\n          }\n        });\n      }\n\n      dispatch({\n        type: 'UPDATE_ADPOST',\n        payload: {\n          key: 'localGallery',\n          value: localGallery\n        }\n      });\n    }\n  };\n\n  var headerImgUri = '';\n\n  if (adPost.localImage && adPost.localImage.preview) {\n    headerImgUri = adPost.localImage.preview;\n  }\n\n  if (adPost.image && adPost.image.largeUrl) {\n    headerImgUri = adPost.image.largeUrl;\n  }\n\n  var gallery = [];\n  var localGalleryImage = [];\n\n  if (adPost.localGallery && adPost.localGallery.length) {\n    localGalleryImage = adPost.localGallery;\n  }\n\n  if (adPost.gallery && adPost.gallery.length) {\n    gallery = adPost.gallery;\n  }\n\n  var combinedGallery = gallery.concat(localGalleryImage);\n\n  var singleSliderImage = function singleSliderImage(image, index) {\n    return __jsx(Box, {\n      key: index,\n      mb: 15,\n      width: \"75px\",\n      style: {\n        position: 'relative'\n      }\n    }, combinedGallery.length > 1 && headerImgUri !== image.largeUrl && headerImgUri !== image.preview ? __jsx(DeleteBtn, {\n      onClick: function onClick() {\n        return handleRemoveImage(image);\n      }\n    }, __jsx(Icon, {\n      icon: androidClose,\n      size: 12,\n      style: {\n        color: '#333333'\n      }\n    })) : null, __jsx(Box, {\n      key: index,\n      width: \"75px\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: '1px solid #dfdfdf'\n      },\n      onClick: function onClick() {\n        if (image.preview) {\n          dispatch({\n            type: 'UPDATE_ADPOST',\n            payload: {\n              key: 'localImage',\n              value: image\n            }\n          });\n          dispatch({\n            type: 'UPDATE_ADPOST',\n            payload: {\n              key: 'image',\n              value: {}\n            }\n          });\n        }\n\n        if (image.url) {\n          dispatch({\n            type: 'UPDATE_ADPOST',\n            payload: {\n              key: 'image',\n              value: image\n            }\n          });\n        }\n      }\n    }, image.preview === headerImgUri ? __jsx(Icon, {\n      icon: checkmarkCircled,\n      size: 18,\n      style: {\n        position: 'absolute',\n        top: -9,\n        right: -9,\n        zIndex: 1,\n        color: '#30C56D'\n      }\n    }) : null, image.largeUrl === headerImgUri ? __jsx(Icon, {\n      icon: checkmarkCircled,\n      size: 20,\n      style: {\n        position: 'absolute',\n        top: -15,\n        right: -10,\n        zIndex: 1,\n        color: '#30C56D'\n      }\n    }) : null, __jsx(Image, {\n      src: image.preview ? image.preview : image.largeUrl,\n      alt: image.preview ? image.preview : image.largeUrl,\n      height: \"57px\"\n    })));\n  };\n\n  return __jsx(Box, {\n    pr: 20,\n    mb: 50,\n    flexBox: true,\n    style: {\n      width: '100%',\n      display: 'flex'\n    }\n  }, __jsx(Box, {\n    mr: 30,\n    flexBox: true,\n    flexDirection: \"column\",\n    style: {\n      flexShrink: 0\n    }\n  }, __jsx(Dropzone, {\n    onDrop: onPreviewDrop\n  }, function (_ref) {\n    var getRootProps = _ref.getRootProps,\n        getInputProps = _ref.getInputProps;\n    return __jsx(\"div\", getRootProps(), __jsx(\"input\", getInputProps()), __jsx(UpButton, null, __jsx(Image, {\n      src: UpIcon,\n      alt: 'upload icon',\n      width: 40\n    })));\n  }), __jsx(ThumbWrapper, null, combinedGallery.length ? combinedGallery.map(singleSliderImage) : null)), __jsx(Box, {\n    style: {\n      border: '1px solid #e2e2e2',\n      width: '100%',\n      height: 400,\n      textAlign: 'center',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      overflow: 'hidden'\n    }\n  }, __jsx(Image, {\n    src: headerImgUri,\n    alt: headerImgUri,\n    height: \"100%\",\n    style: {\n      objectFit: 'cover'\n    }\n  })));\n});","map":null,"metadata":{},"sourceType":"module"}