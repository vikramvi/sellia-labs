{"ast":null,"code":"var _jsxFileName = \"/Users/bhavikshah/Work/headless-graphql/packages/web/containers/Profile/userFavourite.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { PostLoader } from '../../components/Placeholder';\nimport { Grid } from 'react-styled-flexboxgrid';\nimport { SINGLE_POST_PAGE } from 'core/navigation/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_FAVOURITE_POST } from 'core/graphql/Profile.query';\nimport { CURRENCY } from '../../Config';\nimport { withRouter } from 'next/router';\nimport PostCard from '../../components/PostCard';\nimport ListGrid from 'reusecore/src/elements/ListGrid';\nimport NoItemFound from '../../components/NoItemFound';\nimport OnError from '../../components/OnError';\nexport default withRouter(function FavouritePost({\n  router: {\n    query: {\n      username\n    }\n  }\n}) {\n  const {\n    0: loadingMore,\n    1: toggleLoading\n  } = useState(false);\n  const {\n    0: page,\n    1: paginate\n  } = useState(1); // QUERY SECTION\n\n  let QUERY_VARIABLES;\n  QUERY_VARIABLES = {\n    USERNAME: username,\n    LIMIT: 12\n  };\n  const {\n    data,\n    loading,\n    error,\n    fetchMore\n  } = useQuery(GET_FAVOURITE_POST, {\n    variables: QUERY_VARIABLES\n  });\n  const favouritePosts = data && data.author && data.author.favourite && data.author.favourite.data ? data.author.favourite.data : [];\n  const favouritePostCount = data && data.author && data.author.favourite ? data.author.favourite.total : 0;\n  const totalPost = favouritePostCount; // this line will be removed by GET ALL POST\n\n  const postCount = favouritePosts.length;\n  if (error) return __jsx(OnError, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }); // Post Loop Control Area\n\n  return __jsx(Grid, {\n    style: {\n      paddingLeft: 15,\n      paddingRight: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, !loading && favouritePosts.length === 0 ? __jsx(NoItemFound, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }) : __jsx(ListGrid, {\n    data: favouritePosts,\n    totalPost: totalPost,\n    postCount: postCount,\n    columnWidth: ['100%', '50%', '33.33%', '25%'],\n    component: item => {\n      const postImg = item.image ? item.image.url : '';\n      const postFallbackImage = item.image ? item.image.largeUrl : '';\n      return __jsx(Link, {\n        href: `${SINGLE_POST_PAGE}/${item.slug}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, __jsx(PostCard, {\n        currency: CURRENCY,\n        title: item.title,\n        price: item.price,\n        imageSrc: [postImg, postFallbackImage],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      })));\n    },\n    loading: loading ? loading : loadingMore,\n    placeholder: __jsx(PostLoader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }),\n    limit: QUERY_VARIABLES.LIMIT,\n    handleLoadMore: loading => {\n      toggleLoading(true);\n      paginate(page + 1);\n      fetchMore({\n        variables: {\n          page: page + 1\n        },\n        updateQuery: (prev, {\n          fetchMoreResult\n        }) => {\n          if (!fetchMoreResult) {\n            toggleLoading(false);\n            return prev;\n          }\n\n          const oldPosts = prev.author.favourite.data;\n          const newPosts = fetchMoreResult.author.favourite.data;\n\n          if (postCount && totalPost) {\n            if (postCount <= totalPost) {\n              toggleLoading(false);\n              const concatedPosts = oldPosts.concat(newPosts);\n              fetchMoreResult.author.favourite.data = concatedPosts;\n              return fetchMoreResult;\n            }\n          }\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }));\n});","map":{"version":3,"sources":["/Users/bhavikshah/Work/headless-graphql/packages/web/containers/Profile/userFavourite.js"],"names":["React","useState","Link","PostLoader","Grid","SINGLE_POST_PAGE","useQuery","GET_FAVOURITE_POST","CURRENCY","withRouter","PostCard","ListGrid","NoItemFound","OnError","FavouritePost","router","query","username","loadingMore","toggleLoading","page","paginate","QUERY_VARIABLES","USERNAME","LIMIT","data","loading","error","fetchMore","variables","favouritePosts","author","favourite","favouritePostCount","total","totalPost","postCount","length","paddingLeft","paddingRight","item","postImg","image","url","postFallbackImage","largeUrl","slug","title","price","updateQuery","prev","fetchMoreResult","oldPosts","newPosts","concatedPosts","concat"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,SAASC,IAAT,QAAqB,0BAArB;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,kBAAT,QAAmC,4BAAnC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AAEA,eAAeJ,UAAU,CAAC,SAASK,aAAT,CAAuB;AAC/CC,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AADD;AADuC,CAAvB,EAIvB;AACD,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAA+BlB,QAAQ,CAAC,KAAD,CAA7C;AACA,QAAM;AAAA,OAACmB,IAAD;AAAA,OAAOC;AAAP,MAAmBpB,QAAQ,CAAC,CAAD,CAAjC,CAFC,CAGD;;AACA,MAAIqB,eAAJ;AACAA,EAAAA,eAAe,GAAG;AAChBC,IAAAA,QAAQ,EAAEN,QADM;AAEhBO,IAAAA,KAAK,EAAE;AAFS,GAAlB;AAIA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA,KAAjB;AAAwBC,IAAAA;AAAxB,MAAsCtB,QAAQ,CAACC,kBAAD,EAAqB;AACvEsB,IAAAA,SAAS,EAAEP;AAD4D,GAArB,CAApD;AAIA,QAAMQ,cAAc,GAClBL,IAAI,IAAIA,IAAI,CAACM,MAAb,IAAuBN,IAAI,CAACM,MAAL,CAAYC,SAAnC,IAAgDP,IAAI,CAACM,MAAL,CAAYC,SAAZ,CAAsBP,IAAtE,GACIA,IAAI,CAACM,MAAL,CAAYC,SAAZ,CAAsBP,IAD1B,GAEI,EAHN;AAKA,QAAMQ,kBAAkB,GACtBR,IAAI,IAAIA,IAAI,CAACM,MAAb,IAAuBN,IAAI,CAACM,MAAL,CAAYC,SAAnC,GACIP,IAAI,CAACM,MAAL,CAAYC,SAAZ,CAAsBE,KAD1B,GAEI,CAHN;AAKA,QAAMC,SAAS,GAAGF,kBAAlB,CAvBC,CAuBqC;;AACtC,QAAMG,SAAS,GAAGN,cAAc,CAACO,MAAjC;AACA,MAAIV,KAAJ,EAAW,OAAO,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP,CAzBV,CA2BD;;AACA,SACE,MAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEW,MAAAA,WAAW,EAAE,EAAf;AAAmBC,MAAAA,YAAY,EAAE;AAAjC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACb,OAAD,IAAYI,cAAc,CAACO,MAAf,KAA0B,CAAtC,GACC,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAGC,MAAC,QAAD;AACE,IAAA,IAAI,EAAEP,cADR;AAEE,IAAA,SAAS,EAAEK,SAFb;AAGE,IAAA,SAAS,EAAEC,SAHb;AAIE,IAAA,WAAW,EAAE,CAAC,MAAD,EAAS,KAAT,EAAgB,QAAhB,EAA0B,KAA1B,CAJf;AAKE,IAAA,SAAS,EAAEI,IAAI,IAAI;AACjB,YAAMC,OAAO,GAAGD,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACE,KAAL,CAAWC,GAAxB,GAA8B,EAA9C;AACA,YAAMC,iBAAiB,GAAGJ,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACE,KAAL,CAAWG,QAAxB,GAAmC,EAA7D;AACA,aACE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAG,GAAExC,gBAAiB,IAAGmC,IAAI,CAACM,IAAK,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,QAAD;AACE,QAAA,QAAQ,EAAEtC,QADZ;AAEE,QAAA,KAAK,EAAEgC,IAAI,CAACO,KAFd;AAGE,QAAA,KAAK,EAAEP,IAAI,CAACQ,KAHd;AAIE,QAAA,QAAQ,EAAE,CAACP,OAAD,EAAUG,iBAAV,CAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF;AAYD,KApBH;AAqBE,IAAA,OAAO,EAAElB,OAAO,GAAGA,OAAH,GAAaR,WArB/B;AAsBE,IAAA,WAAW,EAAE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBf;AAuBE,IAAA,KAAK,EAAEI,eAAe,CAACE,KAvBzB;AAwBE,IAAA,cAAc,EAAEE,OAAO,IAAI;AACzBP,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,QAAQ,CAACD,IAAI,GAAG,CAAR,CAAR;AACAQ,MAAAA,SAAS,CAAC;AACRC,QAAAA,SAAS,EAAE;AACTT,UAAAA,IAAI,EAAEA,IAAI,GAAG;AADJ,SADH;AAIR6B,QAAAA,WAAW,EAAE,CAACC,IAAD,EAAO;AAAEC,UAAAA;AAAF,SAAP,KAA+B;AAC1C,cAAI,CAACA,eAAL,EAAsB;AACpBhC,YAAAA,aAAa,CAAC,KAAD,CAAb;AACA,mBAAO+B,IAAP;AACD;;AACD,gBAAME,QAAQ,GAAGF,IAAI,CAACnB,MAAL,CAAYC,SAAZ,CAAsBP,IAAvC;AACA,gBAAM4B,QAAQ,GAAGF,eAAe,CAACpB,MAAhB,CAAuBC,SAAvB,CAAiCP,IAAlD;;AACA,cAAIW,SAAS,IAAID,SAAjB,EAA4B;AAC1B,gBAAIC,SAAS,IAAID,SAAjB,EAA4B;AAC1BhB,cAAAA,aAAa,CAAC,KAAD,CAAb;AACA,oBAAMmC,aAAa,GAAGF,QAAQ,CAACG,MAAT,CAAgBF,QAAhB,CAAtB;AACAF,cAAAA,eAAe,CAACpB,MAAhB,CAAuBC,SAAvB,CAAiCP,IAAjC,GAAwC6B,aAAxC;AACA,qBAAOH,eAAP;AACD;AACF;AACF;AAnBO,OAAD,CAAT;AAqBD,KAhDH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADF;AA0DD,CA1FwB,CAAzB","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\nimport { PostLoader } from '../../components/Placeholder';\nimport { Grid } from 'react-styled-flexboxgrid';\nimport { SINGLE_POST_PAGE } from 'core/navigation/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_FAVOURITE_POST } from 'core/graphql/Profile.query';\nimport { CURRENCY } from '../../Config';\nimport { withRouter } from 'next/router';\nimport PostCard from '../../components/PostCard';\nimport ListGrid from 'reusecore/src/elements/ListGrid';\nimport NoItemFound from '../../components/NoItemFound';\nimport OnError from '../../components/OnError';\n\nexport default withRouter(function FavouritePost({\n  router: {\n    query: { username },\n  },\n}) {\n  const [loadingMore, toggleLoading] = useState(false);\n  const [page, paginate] = useState(1);\n  // QUERY SECTION\n  let QUERY_VARIABLES;\n  QUERY_VARIABLES = {\n    USERNAME: username,\n    LIMIT: 12,\n  };\n  const { data, loading, error, fetchMore } = useQuery(GET_FAVOURITE_POST, {\n    variables: QUERY_VARIABLES,\n  });\n\n  const favouritePosts =\n    data && data.author && data.author.favourite && data.author.favourite.data\n      ? data.author.favourite.data\n      : [];\n\n  const favouritePostCount =\n    data && data.author && data.author.favourite\n      ? data.author.favourite.total\n      : 0;\n\n  const totalPost = favouritePostCount; // this line will be removed by GET ALL POST\n  const postCount = favouritePosts.length;\n  if (error) return <OnError />;\n\n  // Post Loop Control Area\n  return (\n    <Grid style={{ paddingLeft: 15, paddingRight: 15 }}>\n      {!loading && favouritePosts.length === 0 ? (\n        <NoItemFound />\n      ) : (\n        <ListGrid\n          data={favouritePosts}\n          totalPost={totalPost}\n          postCount={postCount}\n          columnWidth={['100%', '50%', '33.33%', '25%']}\n          component={item => {\n            const postImg = item.image ? item.image.url : '';\n            const postFallbackImage = item.image ? item.image.largeUrl : '';\n            return (\n              <Link href={`${SINGLE_POST_PAGE}/${item.slug}`}>\n                <a>\n                  <PostCard\n                    currency={CURRENCY}\n                    title={item.title}\n                    price={item.price}\n                    imageSrc={[postImg, postFallbackImage]}\n                  />\n                </a>\n              </Link>\n            );\n          }}\n          loading={loading ? loading : loadingMore}\n          placeholder={<PostLoader />}\n          limit={QUERY_VARIABLES.LIMIT}\n          handleLoadMore={loading => {\n            toggleLoading(true);\n            paginate(page + 1);\n            fetchMore({\n              variables: {\n                page: page + 1,\n              },\n              updateQuery: (prev, { fetchMoreResult }) => {\n                if (!fetchMoreResult) {\n                  toggleLoading(false);\n                  return prev;\n                }\n                const oldPosts = prev.author.favourite.data;\n                const newPosts = fetchMoreResult.author.favourite.data;\n                if (postCount && totalPost) {\n                  if (postCount <= totalPost) {\n                    toggleLoading(false);\n                    const concatedPosts = oldPosts.concat(newPosts);\n                    fetchMoreResult.author.favourite.data = concatedPosts;\n                    return fetchMoreResult;\n                  }\n                }\n              },\n            });\n          }}\n        />\n      )}\n    </Grid>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}