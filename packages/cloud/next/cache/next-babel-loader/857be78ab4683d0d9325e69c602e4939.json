{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bhavikshah/Work/headless-graphql/packages/web/hoc/secretPage.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport redirect from '../helpers/redirect';\nimport { getFirebaseCookie } from '../helpers/session';\n/**\n * HOC for all the secret route\n */\n\nexport default (function (ComposedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(SecretPage, _Component);\n\n      function SecretPage() {\n        _classCallCheck(this, SecretPage);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(SecretPage).apply(this, arguments));\n      }\n\n      _createClass(SecretPage, [{\n        key: \"render\",\n        value: function render() {\n          return __jsx(ComposedComponent, _extends({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 32\n            },\n            __self: this\n          }));\n        }\n      }], [{\n        key: \"getInitialProps\",\n        value: function () {\n          var _getInitialProps = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(context) {\n            var token, user, isLoggedIn;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    token = getFirebaseCookie('id_token', context);\n                    user = false;\n                    user = getFirebaseCookie('user', context);\n                    isLoggedIn = token ? true : false;\n\n                    if (!isLoggedIn) {\n                      redirect(context, '/signin');\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      isLoggedIn: isLoggedIn,\n                      userId: user ? user.userId : 'false',\n                      email: user ? user.email : false,\n                      error: user ? user.error : false\n                    });\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          function getInitialProps(_x) {\n            return _getInitialProps.apply(this, arguments);\n          }\n\n          return getInitialProps;\n        }()\n      }]);\n\n      return SecretPage;\n    }(Component)\n  );\n});","map":{"version":3,"sources":["/Users/bhavikshah/Work/headless-graphql/packages/web/hoc/secretPage.js"],"names":["React","Component","redirect","getFirebaseCookie","ComposedComponent","props","context","token","user","isLoggedIn","userId","email","error"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AAEA;;;;AAGA,gBAAe,UAAAC,iBAAiB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,iCAuBnB;AACP,iBAAO,MAAC,iBAAD,eAAuB,KAAKC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACD;AAzB2B;AAAA;AAAA;AAAA;AAAA;AAAA,oDAECC,OAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAGpBC,oBAAAA,KAHoB,GAGZJ,iBAAiB,CAAC,UAAD,EAAaG,OAAb,CAHL;AAItBE,oBAAAA,IAJsB,GAIf,KAJe;AAK1BA,oBAAAA,IAAI,GAAGL,iBAAiB,CAAC,MAAD,EAASG,OAAT,CAAxB;AACMG,oBAAAA,UANoB,GAMPF,KAAK,GAAG,IAAH,GAAU,KANR;;AAO1B,wBAAI,CAACE,UAAL,EAAiB;AACfP,sBAAAA,QAAQ,CAACI,OAAD,EAAU,SAAV,CAAR;AACD;;AATyB,qDAUnB;AACLG,sBAAAA,UAAU,EAAVA,UADK;AAELC,sBAAAA,MAAM,EAAEF,IAAI,GAAGA,IAAI,CAACE,MAAR,GAAiB,OAFxB;AAGLC,sBAAAA,KAAK,EAAEH,IAAI,GAAGA,IAAI,CAACG,KAAR,GAAgB,KAHtB;AAILC,sBAAAA,KAAK,EAAEJ,IAAI,GAAGA,IAAI,CAACI,KAAR,GAAgB;AAJtB,qBAVmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,MACLX,SADK;AAAA;AAAA,CAAhC","sourcesContent":["import React, { Component } from 'react';\nimport redirect from '../helpers/redirect';\nimport { getFirebaseCookie } from '../helpers/session';\n\n/**\n * HOC for all the secret route\n */\nexport default ComposedComponent =>\n  class SecretPage extends Component {\n    static async getInitialProps(context) {\n      const token = getFirebaseCookie('id_token', context);\n      let user = false;\n      user = getFirebaseCookie('user', context);\n      const isLoggedIn = token ? true : false;\n      if (!isLoggedIn) {\n        redirect(context, '/signin');\n      }\n      return {\n        isLoggedIn,\n        userId: user ? user.userId : 'false',\n        email: user ? user.email : false,\n        error: user ? user.error : false,\n      };\n      // return {\n      //   isLoggedIn: true,\n      //   userId: '3OqYVOVFVWagABCNpt040372egy2',\n      //   email: 'paulruet58@gmail.com',\n      //   error: user ? user.error : false,\n      // };\n    }\n    render() {\n      return <ComposedComponent {...this.props} />;\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}