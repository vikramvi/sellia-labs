{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bhavikshah/Work/headless-graphql/packages/web/hoc/isAuthenticated.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport redirect from '../helpers/redirect';\nimport { getFirebaseCookie } from '../helpers/session';\n/**\n * For those routes where authenticated used can't navigate like login route\n */\n\nexport default (function (ComposedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(IsAuthenticated, _Component);\n\n      function IsAuthenticated() {\n        _classCallCheck(this, IsAuthenticated);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(IsAuthenticated).apply(this, arguments));\n      }\n\n      _createClass(IsAuthenticated, [{\n        key: \"render\",\n        value: function render() {\n          return __jsx(ComposedComponent, _extends({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 19\n            },\n            __self: this\n          }));\n        }\n      }], [{\n        key: \"getInitialProps\",\n        value: function () {\n          var _getInitialProps = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(context) {\n            var token, isLoggedIn;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    token = getFirebaseCookie('id_token', context);\n                    isLoggedIn = token ? true : false;\n\n                    if (isLoggedIn) {\n                      redirect(context, '/');\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      isLoggedIn: isLoggedIn\n                    });\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          function getInitialProps(_x) {\n            return _getInitialProps.apply(this, arguments);\n          }\n\n          return getInitialProps;\n        }()\n      }]);\n\n      return IsAuthenticated;\n    }(Component)\n  );\n});","map":{"version":3,"sources":["/Users/bhavikshah/Work/headless-graphql/packages/web/hoc/isAuthenticated.js"],"names":["React","Component","redirect","getFirebaseCookie","ComposedComponent","props","context","token","isLoggedIn"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AAEA;;;;AAGA,gBAAe,UAAAC,iBAAiB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,iCAUnB;AACP,iBAAO,MAAC,iBAAD,eAAuB,KAAKC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACD;AAZ2B;AAAA;AAAA;AAAA;AAAA;AAAA,oDAECC,OAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAGpBC,oBAAAA,KAHoB,GAGZJ,iBAAiB,CAAC,UAAD,EAAaG,OAAb,CAHL;AAIpBE,oBAAAA,UAJoB,GAIPD,KAAK,GAAG,IAAH,GAAU,KAJR;;AAK1B,wBAAIC,UAAJ,EAAgB;AACdN,sBAAAA,QAAQ,CAACI,OAAD,EAAU,GAAV,CAAR;AACD;;AAPyB,qDAQnB;AAAEE,sBAAAA,UAAU,EAAVA;AAAF,qBARmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,MACAP,SADA;AAAA;AAAA,CAAhC","sourcesContent":["import React, { Component } from 'react';\nimport redirect from '../helpers/redirect';\nimport { getFirebaseCookie } from '../helpers/session';\n\n/**\n * For those routes where authenticated used can't navigate like login route\n */\nexport default ComposedComponent =>\n  class IsAuthenticated extends Component {\n    static async getInitialProps(context) {\n      const token = getFirebaseCookie('id_token', context);\n      const isLoggedIn = token ? true : false;\n      if (isLoggedIn) {\n        redirect(context, '/');\n      }\n      return { isLoggedIn };\n    }\n    render() {\n      return <ComposedComponent {...this.props} />;\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}