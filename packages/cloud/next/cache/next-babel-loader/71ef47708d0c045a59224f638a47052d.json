{"ast":null,"code":"import cookie from 'js-cookie';\nimport nextCookie from 'next-cookies';\nconst FIREBASE_COOKIE = '__session';\n\nconst getCookieFromBrowser = key => {\n  return cookie.get(key);\n};\n\nconst getCookieFromServer = (ctx, key = 'id_token') => {\n  const cookie = nextCookie(ctx);\n  const token = cookie && cookie[key] ? cookie[key] : false;\n  if (!token) return null;\n  return token;\n};\n\nexport const getCookie = (key, context = {}) => {\n  return process.browser ? getCookieFromBrowser(key) : getCookieFromServer(context, key);\n};\nexport const setCookie = (key, token) => {\n  cookie.set(key, token, {\n    expires: 7\n  });\n};\nexport const removeCookie = key => {\n  cookie.remove(key);\n};\nexport const setFirebaseCookie = (key, token) => {\n  // get cookie from __session using getCookie function\n  // parse the data from cookie\n  // assign the token to the key\n  // call set cookie function with the new data\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n    data[key] = token;\n    setCookie(FIREBASE_COOKIE, data);\n  } catch (error) {\n    console.log(error, 'setFirebaseCookie');\n  }\n};\nexport const removeFirebaseCookie = key => {\n  // get cookie from __session  using getCookie function\n  // parse the data from cookie\n  // remove the key from the data\n  // call set cookie function with the new data\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n\n    if (data && data.hasOwnProperty(key)) {\n      delete data[key];\n      setCookie(FIREBASE_COOKIE, data);\n    } else {// console.log(\n      //   `${key} is probably not available inside the cookie removeFirebaseCookie`\n      // );\n    }\n  } catch (error) {\n    console.log(error, 'removeFirebaseCookie');\n  }\n};\nexport const getFirebaseCookie = (key, context = false) => {\n  // get cookie from __session using getCookie function\n  // parse the data from cookie\n  // get the relatedData using the key\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE, context);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n\n    if (data && data.hasOwnProperty(key)) {\n      return data[key];\n    } else {// console.log(\n      //   `${key} is probably not available inside the cookie getFirebaseCookie`\n      // );\n    }\n  } catch (error) {\n    console.log(error, 'getFirebaseCookie');\n  }\n};","map":{"version":3,"sources":["/Users/bhavikshah/Work/headless-graphql/packages/web/helpers/session.js"],"names":["cookie","nextCookie","FIREBASE_COOKIE","getCookieFromBrowser","key","get","getCookieFromServer","ctx","token","getCookie","context","process","browser","setCookie","set","expires","removeCookie","remove","setFirebaseCookie","cookieData","data","JSON","parse","error","console","log","removeFirebaseCookie","hasOwnProperty","getFirebaseCookie"],"mappings":"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","sourcesContent":["import cookie from 'js-cookie';\nimport nextCookie from 'next-cookies';\n\nconst FIREBASE_COOKIE = '__session';\n\nconst getCookieFromBrowser = key => {\n  return cookie.get(key);\n};\n\nconst getCookieFromServer = (ctx, key = 'id_token') => {\n  const cookie = nextCookie(ctx);\n  const token = cookie && cookie[key] ? cookie[key] : false;\n  if (!token) return null;\n  return token;\n};\n\nexport const getCookie = (key, context = {}) => {\n  return process.browser\n    ? getCookieFromBrowser(key)\n    : getCookieFromServer(context, key);\n};\n\nexport const setCookie = (key, token) => {\n  cookie.set(key, token, { expires: 7 });\n};\n\nexport const removeCookie = key => {\n  cookie.remove(key);\n};\n\nexport const setFirebaseCookie = (key, token) => {\n  // get cookie from __session using getCookie function\n  // parse the data from cookie\n  // assign the token to the key\n  // call set cookie function with the new data\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n    data[key] = token;\n    setCookie(FIREBASE_COOKIE, data);\n  } catch (error) {\n    console.log(error, 'setFirebaseCookie');\n  }\n};\n\nexport const removeFirebaseCookie = key => {\n  // get cookie from __session  using getCookie function\n  // parse the data from cookie\n  // remove the key from the data\n  // call set cookie function with the new data\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n    if (data && data.hasOwnProperty(key)) {\n      delete data[key];\n      setCookie(FIREBASE_COOKIE, data);\n    } else {\n      // console.log(\n      //   `${key} is probably not available inside the cookie removeFirebaseCookie`\n      // );\n    }\n  } catch (error) {\n    console.log(error, 'removeFirebaseCookie');\n  }\n};\n\nexport const getFirebaseCookie = (key, context = false) => {\n  // get cookie from __session using getCookie function\n  // parse the data from cookie\n  // get the relatedData using the key\n  try {\n    const cookieData = getCookie(FIREBASE_COOKIE, context);\n    const data = cookieData ? JSON.parse(cookieData) : {};\n    if (data && data.hasOwnProperty(key)) {\n      return data[key];\n    } else {\n      // console.log(\n      //   `${key} is probably not available inside the cookie getFirebaseCookie`\n      // );\n    }\n  } catch (error) {\n    console.log(error, 'getFirebaseCookie');\n  }\n};\n"]},"metadata":{},"sourceType":"module"}