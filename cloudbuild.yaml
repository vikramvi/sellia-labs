steps:
  - name: node:12.0.0
    entrypoint: yarn
    args: ["install"]
  - name: node:12.0.0
    entrypoint: yarn
    args: ["web:build"]
    id: "web-build"
  - name: node:12.0.0
    entrypoint: yarn
    args: ["server:build"]
    id: "server-build"
    waitFor: ["web-build"]
  # - name: node:12.0.0
  #   entrypoint: yarn
  #   args: ["deploy"]
  #   waitFor: ["server-build"]
 - name: gcr.io/sellia-42377/firebase
    args: ['deploy', '--project=sellia-42377', '--only=hosting']
    dir: 'packages/cloud'  
# steps:
#   - name: node:10
#     entrypoint: yarn
#     args:
#       - install

# steps:
#   # Install
#   - name: "gcr.io/cloud-builders/yarn"
#     args: ["install"]
#   # Build
#   - name: "gcr.io/cloud-builders/yarn"
#     args: ["run", "web:build"]
#   - name: "gcr.io/cloud-builders/yarn"
#     args: ["run", "server:build"]
#   # Deploy
#   - name: "gcr.io/cloud-builders/yarn"
#     args: ["run", "deploy"]
